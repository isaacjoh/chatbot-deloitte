Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = build;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodashCli = require('lodash-cli');

var _lodashCli2 = _interopRequireDefault(_lodashCli);

var _bluebird = require('bluebird');

// Valid exports are “amd”, “commonjs”, “es”, “global”, “iojs”, “node”, “npm”, & “none”.

var _bluebird2 = _interopRequireDefault(_bluebird);

var exportMap = {
  umd: 'amd,commonjs,global,iojs',
  amd: 'amd',
  cjs: 'commonjs'
};

function build(methods, options) {
  var opts = [
  // Detect the build type
  /compat/i.test(options.lodashPath) ? 'compat' : 'modern',
  // Requested the required methods
  'include=' + methods.join(','), options.production ? '--production' : '--development',
  // Map lodash-cli's export formats to ours
  'exports=' + exportMap[options.exports], '--silent'];

  return new _bluebird2['default'](function (resolve) {
    (0, _lodashCli2['default'])(opts, function (out) {
      return resolve(out.source);
    });
  });
}

module.exports = exports['default'];