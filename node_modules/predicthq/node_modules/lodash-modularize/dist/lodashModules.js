Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _lodash = require('lodash');

var _fs = require('./fs');

var _fs2 = _interopRequireDefault(_fs);

function getDirectories(srcpath) {
  return _fs2['default'].readdirAsync(srcpath).filter(function (file) {
    return _fs2['default'].statAsync(_path2['default'].join(srcpath, file)).then(function (stat) {
      return stat.isDirectory();
    });
  });
}

var expectedPath = './node_modules/lodash';
var modularizePath = _path2['default'].join(__dirname, '../node_modules/lodash');

var lodashPath = _fs2['default'].existsSync(expectedPath) ? expectedPath : modularizePath;
var m = undefined;

exports['default'] = getDirectories(lodashPath).then(function (modules) {
  m = modules;
  return _bluebird2['default'].map(modules, function (val) {
    return _fs2['default'].readdirAsync(_path2['default'].join(lodashPath, val)).map(function (name) {
      return name.slice(0, -3);
    });
  });
}).then(function (functions) {
  return (0, _lodash.zipObject)(m, functions);
});
module.exports = exports['default'];